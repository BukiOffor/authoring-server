import{a as g,e as J,j as X,r as m}from"./chunk-NDJI2DGD.js";import{l as W,p as Y}from"./chunk-LKMNDKOK.js";import{B as O,C as P,Ga as l,I as R,M as y,Ma as c,Na as B,Oa as T,P as u,Qa as j,R as A,Sa as F,T as x,Tb as L,Ua as e,Ub as G,Va as k,Vb as $,Zb as h,f as S,lb as V,mb as z,nb as K,qa as U,qc as q,s as I,u as v,ua as N,vc as Z,wc as H,zc as Q}from"./chunk-ZXBBRZMY.js";import{a as M,b as D}from"./chunk-C6Q5SG76.js";function ge(n,o){}var p=()=>{let n=typeof window<"u"?window:void 0;return n&&n.tinymce?n.tinymce:null},me=(()=>{class n{constructor(){this.onBeforePaste=new e,this.onBlur=new e,this.onClick=new e,this.onContextMenu=new e,this.onCopy=new e,this.onCut=new e,this.onDblclick=new e,this.onDrag=new e,this.onDragDrop=new e,this.onDragEnd=new e,this.onDragGesture=new e,this.onDragOver=new e,this.onDrop=new e,this.onFocus=new e,this.onFocusIn=new e,this.onFocusOut=new e,this.onKeyDown=new e,this.onKeyPress=new e,this.onKeyUp=new e,this.onMouseDown=new e,this.onMouseEnter=new e,this.onMouseLeave=new e,this.onMouseMove=new e,this.onMouseOut=new e,this.onMouseOver=new e,this.onMouseUp=new e,this.onPaste=new e,this.onSelectionChange=new e,this.onActivate=new e,this.onAddUndo=new e,this.onBeforeAddUndo=new e,this.onBeforeExecCommand=new e,this.onBeforeGetContent=new e,this.onBeforeRenderUI=new e,this.onBeforeSetContent=new e,this.onChange=new e,this.onClearUndos=new e,this.onDeactivate=new e,this.onDirty=new e,this.onExecCommand=new e,this.onGetContent=new e,this.onHide=new e,this.onInit=new e,this.onInitNgModel=new e,this.onLoadContent=new e,this.onNodeChange=new e,this.onPostProcess=new e,this.onPostRender=new e,this.onPreInit=new e,this.onPreProcess=new e,this.onProgressState=new e,this.onRedo=new e,this.onRemove=new e,this.onReset=new e,this.onResizeEditor=new e,this.onSaveContent=new e,this.onSetAttrib=new e,this.onObjectResizeStart=new e,this.onObjectResized=new e,this.onObjectSelected=new e,this.onSetContent=new e,this.onShow=new e,this.onSubmit=new e,this.onUndo=new e,this.onVisualAid=new e}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=T({type:n,outputs:{onBeforePaste:"onBeforePaste",onBlur:"onBlur",onClick:"onClick",onContextMenu:"onContextMenu",onCopy:"onCopy",onCut:"onCut",onDblclick:"onDblclick",onDrag:"onDrag",onDragDrop:"onDragDrop",onDragEnd:"onDragEnd",onDragGesture:"onDragGesture",onDragOver:"onDragOver",onDrop:"onDrop",onFocus:"onFocus",onFocusIn:"onFocusIn",onFocusOut:"onFocusOut",onKeyDown:"onKeyDown",onKeyPress:"onKeyPress",onKeyUp:"onKeyUp",onMouseDown:"onMouseDown",onMouseEnter:"onMouseEnter",onMouseLeave:"onMouseLeave",onMouseMove:"onMouseMove",onMouseOut:"onMouseOut",onMouseOver:"onMouseOver",onMouseUp:"onMouseUp",onPaste:"onPaste",onSelectionChange:"onSelectionChange",onActivate:"onActivate",onAddUndo:"onAddUndo",onBeforeAddUndo:"onBeforeAddUndo",onBeforeExecCommand:"onBeforeExecCommand",onBeforeGetContent:"onBeforeGetContent",onBeforeRenderUI:"onBeforeRenderUI",onBeforeSetContent:"onBeforeSetContent",onChange:"onChange",onClearUndos:"onClearUndos",onDeactivate:"onDeactivate",onDirty:"onDirty",onExecCommand:"onExecCommand",onGetContent:"onGetContent",onHide:"onHide",onInit:"onInit",onInitNgModel:"onInitNgModel",onLoadContent:"onLoadContent",onNodeChange:"onNodeChange",onPostProcess:"onPostProcess",onPostRender:"onPostRender",onPreInit:"onPreInit",onPreProcess:"onPreProcess",onProgressState:"onProgressState",onRedo:"onRedo",onRemove:"onRemove",onReset:"onReset",onResizeEditor:"onResizeEditor",onSaveContent:"onSaveContent",onSetAttrib:"onSetAttrib",onObjectResizeStart:"onObjectResizeStart",onObjectResized:"onObjectResized",onObjectSelected:"onObjectSelected",onSetContent:"onSetContent",onShow:"onShow",onSubmit:"onSubmit",onUndo:"onUndo",onVisualAid:"onVisualAid"},standalone:!1}),n})(),ee=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onResizeEditor","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],f=(n,o,t)=>v(n,o).pipe(y(t)),pe=(n,o,t)=>{fe(n).forEach(r=>{let s=n[r];f(o,r.substring(2),t).subscribe(d=>{s.observers.length>0&&n.ngZone.run(()=>s.emit({event:d,editor:o}))})})},fe=n=>{let o=ne(n.ignoreEvents,[]);return ne(n.allowedEvents,ee).filter(i=>ee.includes(i)&&!o.includes(i))},ne=(n,o)=>typeof n=="string"?n.split(",").map(t=>t.trim()):Array.isArray(n)?n:o,te=0,Ce=n=>{let t=new Date().getTime(),i=Math.floor(Math.random()*1e9);return te++,n+"_"+i+te+String(t)},oe=n=>typeof n<"u"&&n.tagName.toLowerCase()==="textarea",ie=n=>typeof n>"u"||n===""?[]:Array.isArray(n)?n:n.split(" "),we=(n,o)=>ie(n).concat(ie(o)),be=()=>{},se=n=>n==null,re=()=>({script$:null}),ve=()=>{let n=re();return{load:(i,r)=>n.script$||(n.script$=I(()=>{let s=i.createElement("script");return s.referrerPolicy="origin",s.type="application/javascript",s.src=r,i.head.appendChild(s),v(s,"load").pipe(O(1),P(void 0))}).pipe(R({bufferSize:1,refCount:!0}))),reinitialize:()=>{n=re()}}},ye=ve(),_e=new x("TINYMCE_SCRIPT_SRC"),Ee={provide:g,useExisting:u(()=>_),multi:!0},_=(()=>{class n extends me{constructor(t,i,r,s){super(),this.platformId=r,this.tinymceScriptSrc=s,this.cloudChannel="5",this.apiKey="no-api-key",this.id="",this.modelEvents="change input undo redo",this.onTouchedCallback=be,this.destroy$=new S,this.initialise=()=>{let d=D(M({},this.init),{selector:void 0,target:this._element,inline:this.inline,readonly:this.disabled,plugins:we(this.init&&this.init.plugins,this.plugins),toolbar:this.toolbar||this.init&&this.init.toolbar,setup:a=>{this._editor=a,f(a,"init",this.destroy$).subscribe(()=>{this.initEditor(a)}),pe(this,a,this.destroy$),this.init&&typeof this.init.setup=="function"&&this.init.setup(a)}});oe(this._element)&&(this._element.style.visibility=""),this.ngZone.runOutsideAngular(()=>{p().init(d)})},this._elementRef=t,this.ngZone=i}set disabled(t){this._disabled=t,this._editor&&this._editor.initialized&&this._editor.setMode(t?"readonly":"design")}get disabled(){return this._disabled}get editor(){return this._editor}writeValue(t){this._editor&&this._editor.initialized?this._editor.setContent(se(t)?"":t):this.initialValue=t===null?void 0:t}registerOnChange(t){this.onChangeCallback=t}registerOnTouched(t){this.onTouchedCallback=t}setDisabledState(t){this.disabled=t}ngAfterViewInit(){Y(this.platformId)&&(this.id=this.id||Ce("tiny-angular"),this.inline=this.inline!==void 0?this.inline!==!1:!!this.init?.inline,this.createElement(),p()!==null?this.initialise():this._element&&this._element.ownerDocument&&ye.load(this._element.ownerDocument,this.getScriptSrc()).pipe(y(this.destroy$)).subscribe(this.initialise))}ngOnDestroy(){this.destroy$.next(),p()!==null&&p().remove(this._editor)}createElement(){let t=typeof this.tagName=="string"?this.tagName:"div";this._element=document.createElement(this.inline?t:"textarea"),this._element&&(document.getElementById(this.id)&&console.warn(`TinyMCE-Angular: an element with id [${this.id}] already exists. Editors with duplicate Id will not be able to mount`),this._element.id=this.id,oe(this._element)&&(this._element.style.visibility="hidden"),this._elementRef.nativeElement.appendChild(this._element))}getScriptSrc(){return se(this.tinymceScriptSrc)?`https://cdn.tiny.cloud/1/${this.apiKey}/tinymce/${this.cloudChannel}/tinymce.min.js`:this.tinymceScriptSrc}initEditor(t){f(t,"blur",this.destroy$).subscribe(()=>{this.ngZone.run(()=>this.onTouchedCallback())}),f(t,this.modelEvents,this.destroy$).subscribe(()=>{this.ngZone.run(()=>this.emitOnChange(t))}),typeof this.initialValue=="string"&&this.ngZone.run(()=>{t.setContent(this.initialValue),t.getContent()!==this.initialValue&&this.emitOnChange(t),this.onInitNgModel!==void 0&&this.onInitNgModel.emit(t)})}emitOnChange(t){this.onChangeCallback&&this.onChangeCallback(t.getContent({format:this.outputFormat}))}}return n.\u0275fac=function(t){return new(t||n)(l(U),l(k),l(N),l(_e,8))},n.\u0275cmp=c({type:n,selectors:[["editor"]],inputs:{cloudChannel:"cloudChannel",apiKey:"apiKey",init:"init",id:"id",initialValue:"initialValue",outputFormat:"outputFormat",inline:"inline",tagName:"tagName",plugins:"plugins",toolbar:"toolbar",modelEvents:"modelEvents",allowedEvents:"allowedEvents",ignoreEvents:"ignoreEvents",disabled:"disabled"},standalone:!1,features:[h([Ee]),j],decls:1,vars:0,template:function(t,i){t&1&&F(0,ge,0,0,"ng-template")},styles:["[_nghost-%COMP%]{display:block}"]}),n})(),ae=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=B({type:n}),n.\u0275inj=A({imports:[[W,m]]}),n})();var de=class n{value=Q();config=H();valueChanges=Z();internalValue="";editorInstance;onChange=o=>{};onTouched=()=>{};constructor(){q(()=>{this.valueChanges.emit(this.value())})}editorInit;ngOnInit(){this.editorInit={branding:!1,menubar:!0,base_url:"/tinymce",suffix:".min",height:this.config()?.height??"300",toolbar:"undo redo | formatselect | bold italic backcolor |           alignleft aligncenter alignright alignjustify |           bullist numlist outdent indent | removeformat | help"}}writeValue(o){this.internalValue=o||"",this.editorInstance&&this.editorInstance.setContent(this.internalValue)}registerOnChange(o){this.onChange=o}registerOnTouched(o){this.onTouched=o}setDisabledState(o){this.editorInstance&&this.editorInstance.setMode(o?"readonly":"design")}onEditorInit(o){this.editorInstance=o.editor,this.internalValue&&this.editorInstance.setContent(this.internalValue)}onEditorChange(o){this.internalValue=o,this.onChange(o)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=c({type:n,selectors:[["app-editor"]],inputs:{value:[1,"value"],config:[1,"config"]},outputs:{value:"valueChange",valueChanges:"valueChanges"},features:[h([{provide:g,useExisting:u(()=>n),multi:!0}])],decls:1,vars:2,consts:[[1,"w-full",3,"ngModelChange","init","ngModel"]],template:function(t,i){t&1&&(z(0,"editor",0),$("ngModelChange",function(s){return G(i.value,s)||(i.value=s),s}),K()),t&2&&(V("init",i.editorInit),L("ngModel",i.value))},dependencies:[ae,_,m,J,X],encapsulation:2})};var De=(i=>(i.MultipleChoice="MultipleChoice",i.Passage="Passage",i.Cloze="Cloze",i))(De||{});var le=class{stem;rubric;items;subject_id;topic_id;constructor(o,t,i,r,s,d){this.stem=o.passage,this.rubric=o.instruction,this.subject_id=t,this.topic_id=i,this.items=[];for(var a=0;a<o.questions.length;a++){let w=o.questions[a],E=[];for(var C=0;C<w.options.length;C++){let b=w.options[C],ce={text:b.optionText,position:b.position,is_correct:b.isCorrect};E.push(ce)}let ue={question_type:r,subject_id:t,topic_id:i,title:"Read Passage Instruction",text:w.question,taxonomy:"Understanding",options:E,task_id:s,submit:!d,difficulty:0,passage_id:null};this.items.push(ue)}}};export{de as a,De as b,le as c};
